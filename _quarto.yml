project:
  type: website
  output-dir: doc

website:
  title: "Locimapper Developer Docs"
  favicon: images/favicon.png
  navbar:
    logo: images/logo.png
    right:
      - text: "GitHub"
        href: https://github.com/Elshaday-Tamire
      - icon: sun
        href: "#"
        aria-label: "Appearance"
  sidebar:
    style: "floating"
    search: true
    contents:
      - href: index.qmd
        text: "Overview"
      - section: "Setup"
        contents:
          - qmd/developer-settings.qmd
          - qmd/integrations.qmd
      - section: "Embedding & APIs"
        contents:
          - qmd/launch-endpoint.qmd
          - qmd/modal-embed.qmd
      - section: "Reference"
        contents:
          - qmd/security.qmd

format:
  html:
    theme:
      light: cosmo
      dark: darkly
    css: styles.css
    toc: true
    smooth-scroll: true
    code-copy: true
    code-overflow: wrap
    anchor-sections: true
    number-sections: false
    df-print: paged
    include-in-header:
      text: |
        <script>
          document.addEventListener("DOMContentLoaded", () => {
            const btn = document.querySelector('a[aria-label="Appearance"]');
            if (!btn) return;
            btn.addEventListener("click", (e) => {
              e.preventDefault();
              const current = document.documentElement.getAttribute("data-theme");
              const next = current === "dark" ? "light" : "dark";
              document.documentElement.setAttribute("data-theme", next);
              localStorage.setItem("quarto-color-scheme", next);
            });
            const saved = localStorage.getItem("quarto-color-scheme");
            if (saved) document.documentElement.setAttribute("data-theme", saved);
          });
        </script>
    include-after-body:
      text: |
        <style>
          :root[data-theme="dark"] { color-scheme: dark; }
        </style>
